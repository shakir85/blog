<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Learn how to access container's process and filesystem directly from the host"><title>Docker containers process</title>
<link rel=canonical href=https://demo.stack.jimmycai.com/p/docker-containers-process/><link rel=stylesheet href=/scss/style.min.abbd69b2908fdfcd5179898beaafd374514a86538d81639ddd2c58c06ae54e40.css><meta property="og:title" content="Docker containers process"><meta property="og:description" content="Learn how to access container's process and filesystem directly from the host"><meta property="og:url" content="https://demo.stack.jimmycai.com/p/docker-containers-process/"><meta property="og:site_name" content="Shakir"><meta property="og:type" content="article"><meta property="article:section" content="Post"><meta property="article:tag" content="good to know"><meta property="article:published_time" content="2023-04-22T11:17:28-07:00"><meta property="article:modified_time" content="2023-04-22T11:17:28-07:00"><meta name=twitter:title content="Docker containers process"><meta name=twitter:description content="Learn how to access container's process and filesystem directly from the host"></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label="Toggle Menu">
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/avatar_hu7eca515642ea01f2249538b3f83662be_6455_300x0_resize_box_3.png width=300 height=300 class=site-logo loading=lazy alt=Avatar>
</a><span class=emoji>ðŸ‘‹</span></figure><div class=site-meta><h1 class=site-name><a href=/>Shakir</a></h1><h2 class=site-description>Brief yet insightful posts covering DevOps, AWS, and the fascinating world of Linux</h2></div></header><ol class=social-menu><li><a href=https://github.com/shakir85 target=_blank title=GitHub rel=me><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li><li><a href=https://gitlab.com/homelabgroup target=_blank title=GitLab rel=me><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-gitlab" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M21 14l-9 7-9-7L6 3l3 7h6l3-7z"/></svg></a></li><li><a href=https://www.linkedin.com/in/almasaari/ target=_blank title=LinkedIn rel=me><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-linkedin" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 4m0 2a2 2 0 012-2h12a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2z"/><path d="M8 11v5"/><path d="M8 8v.01"/><path d="M12 16v-5"/><path d="M16 16v-3a2 2 0 00-4 0"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>Home</span></a></li><li><a href=/archives/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>Archives</span></a></li><li><a href=/search/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>Search</span></a></li><div class=menu-bottom-section><li id=dark-mode-toggle><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>Dark Mode</span></li></div></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">Table of contents</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#getting-started>Getting Started&mldr;</a></li><li><a href=#access-container-pid>Access container PID</a></li><li><a href=#check-the-proc-directory>Check the <code>/proc</code> directory</a></li><li><a href=#manipulate-the-container-process>Manipulate the container process</a></li><li><a href=#conclusion>Conclusion</a></li></ol></nav></div></section></aside><main class="main full-width"><article class=main-article><header class=article-header><div class=article-details><header class=article-category><a href=/categories/docker/>docker
</a><a href=/categories/linux/>linux</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/p/docker-containers-process/>Docker containers process</a></h2><h3 class=article-subtitle>Learn how to access container's process and filesystem directly from the host</h3></div><footer class=article-time><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>Apr 22, 2023</time></div><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>4 minute read</time></div></footer></div></header><section class=article-content><p>A Docker container is a process, isolated from the host and other containers, running on the system using various Linux kernel features, such as namespaces and cgroups. And this is the main differentiator between VMs and containers.</p><p>When you start a Docker container, Docker creates a new process in the host system&rsquo;s process tree. Then it will apply the container&rsquo;s configuration such as its file system, network settings and so on to this process.</p><p>This makes the host OS consider a Docker container as just another process running on the system. Since the container is running as a process, we can actually use standard process monitoring tools, such as <code>ps</code> and <code>top</code>, to view and manage Docker.</p><p>In this blog post, we will examine how to find and access a container&rsquo;s process ID (PID) and root filesystem directly from the host machine.</p><h2 id=getting-started>Getting Started&mldr;</h2><p>Let&rsquo;s spin up a container and tinker with it</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>docker run -d --name nginx nginx:latest
</span></span></code></pre></td></tr></table></div></div><h2 id=access-container-pid>Access container PID</h2><p>Docker stores detailed information about the container, including its image, configuration, volume, process ID, and network, in a low-level JSON object. You can use the docker inspect command, pipe the output to jq to parse the JSON object as you wish. Alternatively, you can query a scalar element by its name using Go language template syntax, as follows:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl><span class=c1># SYNTAX: docker inspect -f &#39;{{.State.Pid}}&#39; &lt;CONTAINER_ID|CONTAINER_NAME&gt;</span>
</span></span><span class=line><span class=cl>docker inspect -f <span class=s1>&#39;{{.State.Pid}}&#39;</span> nginx
</span></span></code></pre></td></tr></table></div></div><h2 id=check-the-proc-directory>Check the <code>/proc</code> directory</h2><p>In Linux, the <code>/proc</code> directory is a virtual file system that provides a view of the system&rsquo;s running processes. It contains files and directories that are dynamically generated by the kernel to provide information about the processes, hardware, and other system information.</p><p>Each process running on the system has its own subdirectory under <code>/proc</code>, identified by its process ID (PID). For example, if you have a process id = 12345, you&rsquo;d find its subdirectory in this path: <code>/proc/12345</code>. Inside the PID subdirectory (e.g. <code>/proc/12345</code> in our case), you can find various files that provide information about the process, such as its memory usage, file descriptors, and more.</p><p>So, since the Nginx container that we spun up previously is just a process, we should see a directory named after its PID in <code>/proc</code>.</p><p>Let&rsquo;s re-run the above command and assign the output to a variable, amd <code>ls</code> its <code>proc</code> directory:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl><span class=nv>PID</span><span class=o>=</span><span class=k>$(</span>docker inspect -f <span class=s1>&#39;{{.State.Pid}}&#39;</span> nginx<span class=k>)</span>
</span></span><span class=line><span class=cl>ls /proc/<span class=nv>$PID</span>
</span></span></code></pre></td></tr></table></div></div><p>The output contains everything related to the container process. Explore the <code>cgroup</code> or <code>environ</code> files. Feel free to inspect the other files as well.</p><p>Now let&rsquo;s inspect the container&rsquo;s &ldquo;root&rdquo; filesystem <code>/proc/$PID/root</code></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>ls /proc/<span class=nv>$PID</span>/root
</span></span><span class=line><span class=cl>bin   dev                  docker-entrypoint.sh  home  lib64  mnt  proc  run   srv  tmp  var
</span></span><span class=line><span class=cl>boot  docker-entrypoint.d  etc                   lib   media  opt  root  sbin  sys  usr
</span></span></code></pre></td></tr></table></div></div><p>If we <code>exec</code> into the container, we can see the same content from inside the container</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>docker <span class=nb>exec</span> -it nginx sh
</span></span><span class=line><span class=cl>root@ed08325bda2d:/# ls
</span></span><span class=line><span class=cl>bin   dev		   docker-entrypoint.sh  home  lib64  mnt  proc  run   srv  tmp  var
</span></span><span class=line><span class=cl>boot  docker-entrypoint.d  etc			 lib   media  opt  root  sbin  sys  usr
</span></span></code></pre></td></tr></table></div></div><h2 id=manipulate-the-container-process>Manipulate the container process</h2><p>Like any process on the host, you can control it, but with some limitations. You can see below how the container was terminated using the <code>kill</code> command without interacting with the Docker daemon.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>ps aux <span class=p>|</span> grep <span class=nv>$PID</span>
</span></span><span class=line><span class=cl>root        <span class=m>8929</span>  0.0  0.0   <span class=m>8936</span>  <span class=m>5872</span> ?        Ss   11:30   0:00 nginx: master process nginx -g daemon off<span class=p>;</span>
</span></span><span class=line><span class=cl>root        <span class=m>9053</span>  0.0  0.0  <span class=m>17864</span>  <span class=m>2408</span> pts/4    S+   11:31   0:00 grep --color<span class=o>=</span>auto <span class=m>8929</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>docker ps
</span></span><span class=line><span class=cl>CONTAINER ID   IMAGE     COMMAND                  CREATED          STATUS         PORTS     NAMES
</span></span><span class=line><span class=cl>522e39dfc08e   nginx     <span class=s2>&#34;/docker-entrypoint.â€¦&#34;</span>   <span class=m>10</span> minutes ago   Up <span class=m>7</span> minutes   80/tcp    nginx
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>kill</span> -9 <span class=nv>$PID</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>docker ps
</span></span><span class=line><span class=cl>CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES
</span></span></code></pre></td></tr></table></div></div><h2 id=conclusion>Conclusion</h2><p>We explored how to find a container&rsquo;s process ID and how to access its root filesystem from the host. Unlike virtual machines, containers are isolated processes running in the host. This approach allows Docker to provide lightweight, efficient containerization that can be easily managed and monitored using standard Linux tools. It also allows Docker to run on a wide variety of Linux systems, without requiring any special kernel modifications or configurations.</p></section><footer class=article-footer><section class=article-tags><a href=/tags/good-to-know/>good to know</a></section><section class=article-copyright><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg>
<span>Licensed under CC BY-NC-SA 4.0</span></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>Related content</h2><div class=related-content><div class="flex article-list--tile"><article><a href=/p/docker-cmd-and-entrypoint-differences/><div class=article-details><h2 class=article-title>Docker CMD and ENTRYPOINT differences</h2></div></a></article><article><a href=/p/understanding-inodes/><div class=article-details><h2 class=article-title>Understanding inodes</h2></div></a></article><article><a href=/p/importing-functions-in-shell-scripting/><div class=article-details><h2 class=article-title>Importing functions in shell scripting</h2></div></a></article><article><a href=/p/control-the-default-gateway-in-a-dual-nic-host/><div class=article-details><h2 class=article-title>Control the default gateway In a dual NIC host</h2></div></a></article><article><a href=/p/a-practical-approach-for-using-docker-scratch-base-layer/><div class=article-details><h2 class=article-title>A practical approach for using Docker scratch base layer</h2></div></a></article></div></div></aside><footer class=site-footer><section class=copyright>&copy;
2020 -
2024 Shakir</section><section class=powerby>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>Theme <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.21.0>Stack</a></b> designed by <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a></section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>